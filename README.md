[![CodeFactor](https://www.codefactor.io/repository/github/scattering/sasnets/badge)](https://www.codefactor.io/repository/github/scattering/sasnets)
[![Documentation Status](https://readthedocs.org/projects/sasnets/badge/?version=latest)](https://sasnets.readthedocs.io/en/latest/?badge=latest)
# SASNets

SASNets is a Python program for determining the shape that a SANS (Small Angle Neutron Scattering) dataset of Q and I(Q) comes from. It currently contains two nets: a traditional MLP of 9 layers, and a 1D convolutional network of 11 layers.

SASNets makes use of datafiles generated by a fork of SASModels, found at [pkienzle/sasmodels](https://github.com/pkienzle/sasmodels).

Basic flow:

    conda create -n sasnets python numpy scipy matplotlib scikit-learn pandas
    # ... probably missing some packages...
    conda activate sasnets
    git clone https://github.com/scattering/sasnets

    # Need sasmodels and pyopencl for data generation
    conda install pybind11 appdirs decorator
    pip install pyopencl
    git clone https://github.com/pkienzle/sasmodels

    # Generate the table "train" in sasnets.db  (608 Mb).
    cd sasnets
    PYTHONPATH=../sasmodels:. python -m sasnets.sasgen --count=2000 --mono=true all | tee generate.log
    # ... much waiting ...

    # Train on the dataset (you will want to use more epochs...)
    python -m sasnets.sasnet -v --epochs=10

    # Show training results
    python -m sasnets.analysis
    # Show dendrogram
    python -m sasnets.analysis -c


**TODOS**

* don't save q, dq with every dataset
* use hdf5 rather than sqlite
* allow training to resume on a dataset
